<div class="container mt-4 mb-5">
    <div class="d-flex align-items-center mb-4">
        <a routerLink="/gym-plans" class="btn btn-outline-secondary me-3">
            <i class="bi bi-arrow-left"></i>
        </a>
        <h3>Generate AI Gym Plan</h3>
    </div>

    <form [formGroup]="aiForm" (ngSubmit)="onSubmit()" class="mt-3">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="startDate" class="form-label">Start Date</label>
                <input type="date" id="startDate" class="form-control" formControlName="startDate" />
            </div>
            <div class="col-md-6 mb-3">
                <label for="endDate" class="form-label">End Date</label>
                <input type="date" id="endDate" class="form-control" formControlName="endDate" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="height" class="form-label">Height (cm)</label>
                <input type="number" id="height" class="form-control" formControlName="height" />
            </div>
            <div class="col-md-6 mb-3">
                <label for="weight" class="form-label">Weight (kg)</label>
                <input type="number" id="weight" class="form-control" formControlName="weight" />
            </div>

            <div class="col-md-6 mb-3">
                <label for="fitnessLevel" class="form-label">Fitness Level</label>
                <select class="form-select" id="fitnessLevel" formControlName="fitnessLevel">
                    <option *ngFor="let level of fitnessLevels" [value]="level">{{ level }}</option>
                </select>
            </div>

            <div class="col-md-6 mb-3">
                <label for="primaryGoal" class="form-label">Primary Goal</label>
                <select class="form-select" id="primaryGoal" formControlName="primaryGoal">
                    <option *ngFor="let goal of goals" [value]="goal">{{ goal }}</option>
                </select>
            </div>

            <div class="col-12 mb-3">
                <label class="form-label d-block">Secondary Goals</label>
                <div class="form-check" *ngFor="let goal of goals; let i = index">
                    <input class="form-check-input" type="checkbox" [id]="'secondaryGoal_' + i" [value]="goal"
                        (change)="onCheckboxChange($event, 'secondaryGoals')" />
                    <label class="form-check-label" [for]="'secondaryGoal_' + i">{{ goal }}</label>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <label for="workoutDays" class="form-label">Workout Days/Week</label>
                <input type="number" id="workoutDays" class="form-control" formControlName="workoutDaysPerWeek" />
            </div>

            <div class="col-md-6 mb-3">
                <label for="duration" class="form-label">Preferred Duration (min)</label>
                <input type="number" id="duration" class="form-control"
                    formControlName="preferredWorkoutDurationMinutes" />
            </div>

            <div class="col-12 mb-3">
                <label class="form-label d-block">Available Days</label>
                <div class="form-check" *ngFor="let day of weekdays; let i = index">
                    <input class="form-check-input" type="checkbox" [id]="'availableDay_' + i" [value]="day"
                        (change)="onCheckboxChange($event, 'availableDays')" />
                    <label class="form-check-label" [for]="'availableDay_' + i">{{ day }}</label>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <label for="workoutType" class="form-label">Preferred Workout Type</label>
                <select class="form-select" id="workoutType" formControlName="preferredWorkoutType">
                    <option *ngFor="let type of workoutTypes" [value]="type">{{ type }}</option>
                </select>
            </div>

            <div class="col-md-6 mb-3">
                <label for="trainingStyle" class="form-label">Training Style</label>
                <select class="form-select" id="trainingStyle" formControlName="trainingStyle">
                    <option *ngFor="let style of trainingStyles" [value]="style">{{ style }}</option>
                </select>
            </div>

            <div class="col-12 mb-3">
                <label class="form-label d-block">Focus Muscle Groups</label>
                <div class="form-check" *ngFor="let group of muscleGroups; let i = index">
                    <input class="form-check-input" type="checkbox" [id]="'muscleGroup_' + i" [value]="group"
                        (change)="onCheckboxChange($event, 'focusMuscleGroups')" />
                    <label class="form-check-label" [for]="'muscleGroup_' + i">{{ group }}</label>
                </div>
            </div>

            <div class="col-12 mb-3">
                <label for="injuries" class="form-label">Injuries or Conditions</label>
                <textarea id="injuries" class="form-control" rows="2" formControlName="injuriesOrConditions"></textarea>
            </div>

            <div class="col-12 mb-3">
                <label for="restrictions" class="form-label">Exercise Restrictions</label>
                <textarea id="restrictions" class="form-control" rows="2"
                    formControlName="exerciseRestrictions"></textarea>
            </div>

            <div class="col-12 mb-3">
                <label for="favorites" class="form-label">Favorite Exercises</label>
                <textarea id="favorites" class="form-control" rows="2" formControlName="favoriteExercises"></textarea>
            </div>
        </div>

        <button type="submit" class="btn btn-primary w-100" [disabled]="isSubmitting || aiForm.invalid ">
            {{ isSubmitting ? 'Generating... Please wait' : 'Generate Plan' }}
        </button>
    </form>
</div>